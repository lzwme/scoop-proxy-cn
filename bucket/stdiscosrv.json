{
  "version": "2.0.0",
  "description": "The Syncthing global discovery server",
  "homepage": "https://syncthing.net/",
  "license": "MPL-2.0",
  "architecture": {
    "64bit": {
      "url": "https://github.com/syncthing/discosrv/releases/download/v2.0.0/stdiscosrv-windows-amd64-v2.0.0.zip",
      "hash": "91fa680bee5e5904d2a262197e4e4386465bebbe719d6ad1617e323656ca66e0",
      "extract_dir": "stdiscosrv-windows-amd64-v2.0.0"
    },
    "32bit": {
      "url": "https://github.com/syncthing/discosrv/releases/download/v2.0.0/stdiscosrv-windows-386-v2.0.0.zip",
      "hash": "8cccb454e198c702b03485160c5df0a29e84f7c48a2e25641eff8336b570f63d",
      "extract_dir": "stdiscosrv-windows-386-v2.0.0"
    }
  },
  "bin": [
    [
      "stdiscosrv.exe",
      "stdiscosrv",
      "-cert \"$dir\\cert.pem\"",
      "-db-dir \"$dir\\discovery.db\"",
      "-key \"$dir\\key.pem\""
    ]
  ],
  "persist": [
    "discovery.db",
    "cert.pem",
    "key.pem"
  ],
  "pre_install": [
    "foreach ($name in @('cert.pem', 'key.pem')) {",
    "    if (!(Test-Path \"$persist_dir\\$name\")) {",
    "        New-Item -Force -Path \"$dir\" -Name $name | Out-Null",
    "    }",
    "}"
  ],
  "checkver": {
    "github": "https://github.com/syncthing/discosrv"
  },
  "autoupdate": {
    "architecture": {
      "64bit": {
        "url": "https://github.com/syncthing/discosrv/releases/download/v$version/stdiscosrv-windows-amd64-v$version.zip",
        "extract_dir": "stdiscosrv-windows-amd64-v$version"
      },
      "32bit": {
        "url": "https://github.com/syncthing/discosrv/releases/download/v$version/stdiscosrv-windows-386-v$version.zip",
        "extract_dir": "stdiscosrv-windows-386-v$version"
      }
    }
  }
}